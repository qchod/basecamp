<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://kit.fontawesome.com/7b271bba58.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/public/css/font.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap">
    
    <script src="/public/js/lockLikeMobile.js"></script>

    <title>로그인</title>

    <style>
        body {
            font-family: "Noto Sans KR", sans-serif;
            font-optical-sizing: auto;
            font-style: normal;
        }   
        .fill-on {
            font-variation-settings: 'FILL' 1;
        }
        .fill-off {
            font-variation-settings: 'FILL' 0;
        }
        .seller_profile img{
            aspect-ratio: 1/1;
            width: 100px;
            object-fit: cover;
            object-position: center;
        }
        .icon-col img{
            aspect-ratio: 1/1;
            width: 2.1875em;
            object-fit: cover;
            object-position: center;
        }
        .product-col img{
            aspect-ratio: 1/1;
            width: 100%;
            object-fit: cover;
            object-position: center;
        }
        a{
            text-decoration: none;
            color: black;
        }
        button{
            color: black;
        }
        .f05{
            font-size: 0.5em;
        }
        .f08{
            font-size: 0.8em;
        }
        .f09{
            font-size: 0.9em;
        }
        .f12{
            font-size: 1.2em;
        }
        .f15{
            font-size: 1.5em;
        }
        .f17{
            font-size: 1.7em;
        }
        .f20{
            font-size: 2em;
        }
        .f40{
            font-size: 4em;
        }
        .active{
            font-weight: bold;
            border-bottom: 2px solid black;
        }
        .loginInput{
            border: 0px;
            border-bottom: 1.2px solid rgb(220, 220, 220);
        }
        .loginInput:focus{
            outline: none;
            border-bottom: 1.2px solid black;
        }
        .loginInput::placeholder{
            font-size: 0.9em;
        }
    </style>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const loginForm = document.getElementById("loginForm");

            loginForm.addEventListener("submit", (event) => {
                event.preventDefault();

                const inputId = document.getElementById("inputId");
                const inputPw = document.getElementById("inputPw");

                const userDto = {
                    account: inputId.value,
                    password: inputPw.value
                };

                const url = `/api/user/getUserDtoByAccountInfo`
                fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userDto)
                })
                .then(response => response.json())
                .then((response) => {

                    if(response.data.userDto==null){
                        const loginFailToast = bootstrap.Toast.getOrCreateInstance(document.getElementById("loginFailToast"))
                        loginFailToast.show();
                        setTimeout(() => {
                            loginFailToast.hide();
                        }, 3000);
                    }else{
                        const loginForm = document.getElementById("loginForm");
                        loginForm.submit();
                    }

                })
            });
        });

        function backButton(){
            history.back();
        }
    </script>
</head>
<body>
    <!-- top-nav -->
    <div class="container-fluid fixed-top">
        <div class="row bg-white py-3 bg-opacity-75 align-items-center">
            <a class="col-auto d-flex align-items-center" id="backButton" onclick="backButton()">
                <span class="material-symbols-outlined fw-light">
                    arrow_back
                </span>
            </a>
            <div class="col fw-semibold text-center">
                로그인
            </div>
            <a href="/" class="col-auto d-flex align-items-center text-black">
                <span class="material-symbols-outlined fw-light">
                    home
                </span>
            </a>
        </div>
    </div>

    <div class="container" style="padding-top: 60.792px;">
        <div class="row px-3">
            <div class="col p-0">

                <form id="loginForm" action="/user/loginProcess" class="row" method="post">
                    <div class="col">
                        <div class="row f20 pt-5 text-center">
                            <div class="col">
                                <img src="/public/img/common/배캠.png" style="width: 70%;">
                            </div>
                        </div>
                        <div class="row py-4">
                            <div class="col">
                                <div class="row f12 fw-semibold text-center">
                                    <div class="col">
                                        나만의 캠핑을 시작해 보세요!
                                    </div>
                                </div>
                                <!-- <div class="row f12 fw-semibold text-center">
                                    <div class="col">
                                        시작해 보세요
                                    </div>
                                </div> -->
                            </div>
                        </div>

                        <!-- <div class="row pt-5 pb-4">
                            <div class="col">
                                <div class="row f15">
                                    <div class="col-auto d-flex align-items-center">
                                        <img src="/public/img/common/배캠.png" style="width: 40%;"><span class="pb-1">에</span>
                                    </div>
                                </div>
                                <div class="row f15">
                                    <div class="col">
                                        오신 걸 환영합니다!
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <div class="row pt-2">
                            <div class="col d-grid">
                                <input type="text" id="inputId" name="account" class="loginInput py-3 rounded-0" value="basecamp1" placeholder="아이디 입력">
                            </div>
                        </div>

                        <div class="row pt-2">
                            <div class="col d-grid">
                                <input type="password" id="inputPw" name="password" class="loginInput py-3 rounded-0" value="1234" placeholder="비밀번호 입력">
                            </div>
                        </div>

                        <div class="row py-4">
                            <div class="col d-grid">
                                <button class="btn btn-dark rounded-0 py-3 f08 fw-semibold">
                                    로그인
                                </button>
                            </div>
                        </div>
                        <div class="row justify-content-center f08">
                            <div class="col text-end border-end">
                                아이디 찾기
                            </div>
                            <div class="col">
                                비밀번호 찾기
                            </div>
                        </div>

                        <div class="row pt-4 justify-content-center">
                            <a href="https://kauth.kakao.com/oauth/authorize?client_id=111ec870310ec7e3890df38c0637862b&redirect_uri=https://basecamp.bcyeon.click/auth/kakao/callback&response_type=code" class="col-auto ps-0 icon-col">
                                <img src="/public/img/common/KakaoTalk_icon.png">
                            </a>
                            <div class="col-auto bg-dark text-white px-0 justify-content-center rounded-circle d-flex align-items-center" style="aspect-ratio: 1/1; width: 2.1875em; padding-bottom: 0.156em;">
                                <i class="bi bi-apple"></i>
                            </div>
                        </div>

                        <div class="row py-5 f08 justify-content-center">
                            <div class="col-auto pe-0">
                                아직 BASECAMP 회원이 아니신가요?
                            </div>
                            <a href="/user/register" class="col-auto text-primary">
                                회원가입
                            </a>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <!-- loginFailToast -->
    <div id="loginFailToast" class="toast align-items-center text-bg-danger bg-opacity-75 border-0 rounded-pill fade position-fixed" style="bottom: 50px; left: 50%; transform: translate(-50%, -50%); z-index: 2000; width: 80vw;" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-body row align-items-center">
            <div class="col pe-0 d-flex align-items-center justify-content-center">
                <i class="bi bi-exclamation-triangle-fill"></i>&nbsp;&nbsp;잘못된 아이디 또는 비밀번호입니다
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
