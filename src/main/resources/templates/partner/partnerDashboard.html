<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/7b271bba58.js" crossorigin="anonymous"></script>
    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <!-- partner 오른쪽  본문 css -->
    <link href="/public/css/campingcar/right-content.css" rel="stylesheet">
    <link href="/public/css/common.css" rel="stylesheet">
    <link href="/public/css/basecamp.css" rel="stylesheet">
    <script src="/public/js/util.js"></script>
    <style>
        section {
            margin-bottom: 5px;
            padding: 16px;
            background-color: #fff;
            border: 1px solid #e0e0e0;
            -ms-overflow-style: none;
            scrollbar-width:none;
        }
        .section::webkit-scrollbar {
            display: none;
        }

        .section img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .section-text {
            font-size: 14px;
            color: #888;
            margin-bottom: 8px;
        }
        .highlight-text {
            color: #ff5e57;
            font-weight: bold;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 14px;
        }
        .info-item:last-child {
            border-bottom: none;
        }
        .info-item-title {
            color: #333;
            font-weight: 600;
            font-size:20px;
        }
        .info-item-value {
            color: #555;
        }
        /* 차량 현황 CSS */
        .card-nav {
            background-color: #ffffff;
            color: #333;
            border: 1px solid #ddd;
        }

        .active-vehicle-card {
            background: linear-gradient(135deg, #223e5c, #1d3557);
            color: white;
        }

        .rented-vehicle-card {
            background: linear-gradient(135deg, #6E3FFF, #2158FF);
            color: white;
        }


        .carInfo-Body {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 5px;
            position: relative; /* 이미지 위치 조정 */
        }

        .card-title {
            font-size: 14px; /* 타이틀 크기 */
            font-weight: 500;  /* semibold:600, medium : 500 */
        }
        .card-text {
            font-size : 20px;
            font-weight: 500;
        }

        .custom-row-spacing {
            margin-left: -5px;
            margin-right: -5px;
        }

        .grid {
            padding-left: 5px;
            padding-right: 5px;
            margin-bottom: 3px;
        }

        .fs-18 {
            font-size: 1.125rem; /* 18px */
        }

    </style>
</head>
<body>
    <div th:replace="~{partner/carNavi::topNavi}"></div>

    <div class="container-fluid">
        <div class="row">
            <div th:replace="~{partner/carNavi::leftNavi}"></div>
            <!-- right 템플릿 -->
            <div class="col right bg-body-secondary" style="padding-top: 55px;" th:if="${session.sessionCaravanInfo != null}">
                <div class="row py-3 px-4 d-flex align-items-center bg-white">
                    <div class="col-0"></div>
                    <div class="col fs-6 fw-semibold">
                        대시보드
                    </div>
                </div>
                <!-- 본문내용(templets) -->
                <div class="row px-4 pt-1">
                    <div class="col">
                        <!-- 탭 내용 -->
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18">차량 현황</span>
                                </div>
                            </div>
                            <div class="row custom-row-spacing mb-1">
                                <div class="col-3 grid">
                                    <!-- 차량 대여/반납 완료 되면 여기 수정하자! -->
                                    <div class="card card-nav">
                                        <div class="carInfo-Body">
                                            <div class="card-title">총 전체 차량</div>
                                            <div class="card-text text-end">0 대</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-3 grid">
                                    <div class="card card-nav active-vehicle-card">
                                        <div class="carInfo-Body">
                                            <div class="card-title">사용 가능 차량</div>
                                            <div class="card-text text-end">0 대</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-3 grid">
                                    <div class="card card-nav rented-vehicle-card">
                                        <div class="carInfo-Body">
                                            <div class="card-title">대여 중 차량</div>
                                            <div class="card-text text-end">0 대</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-3 grid">
                                    <div class="card card-nav">
                                        <div class="carInfo-Body">
                                            <div class="card-title">반납 완료 차량</div>
                                            <div class="card-text text-end">0 대</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18">예약 현황</span>
                                </div>
                            </div>
                            <div class="row px-5 pt-3">
                                <div class="col d-flex align-items-center pe-0 mb-2">
                                    <div class="row py-2">
                                        <div class="col-6">
                                            <div class="fs-6 fw-normal ps-1 px-4">예약 접수 </div>
                                        </div>
                                        <div class="col-6 py-2 border-end">
                                            <div class="card-text text-end">0 건</div>
                                        </div>
                                    </div>
                                    <div class="row py-2">
                                        <div class="col-6 ps-3">
                                            <div class="fs-6 fw-normal px-3">예약 승인</div> 
                                        </div>
                                        <div class="col-6 py-2 border-end">
                                            <div class="card-text text-end">0 건</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col d-flex align-items-center py-1 ps-0 mb-2">
                                    <div class="row px-0 py-2">
                                        <div class="col-6">
                                            <div class="fs-6 fw-normal ps-1 px-4">취소 요청</div> 
                                        </div>
                                        <div class="col-6 py-2 px-3 border-end">
                                            <div class="card-text text-end">0 건</div>
                                        </div>
                                    </div>
                                    <div class="row py-2">
                                        <div class="col ps-3">
                                            <div class="fs-6 fw-normal px-3">취소 완료 </div>
                                        </div>
                                        <div class="col py-2 px-3">
                                            <div class="card-text text-end">0 건</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row px-4 pt-1">
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18">대여 차량 위치</span>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col">
                                    <!-- 카카오 map지도 -->
                                    <div id="map" style="width:100%;height:280px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18">실시간 예약 및 반납 예정 타임 라인</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <canvas id="myChart" width="400" height="152"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row px-4 pt-1">
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18"></span>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col">
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row px-4 pt-1">
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18"></span>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col">
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card px-2">
                            <div class="row mb-3">
                                <div class="col text-start p-3 border-bottom">
                                    <span class="section-title fs-18"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- 카카오 지도 API -->
     <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7f8bb83b2b0161991b50622bb9b8be1e&libraries=services,clusterer"></script>
    <!-- Chart.js 라이브러리 추가 (CDN 사용) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@2/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script src="/public/js/campingcar/partnermain.js"></script>
    <script>
        // 지도 생성
        let map = new kakao.maps.Map(document.getElementById('map'), { 
            center: new kakao.maps.LatLng(36.2683, 127.6358), // 지도의 중심좌표 
            level: 14 // 지도의 확대 레벨 
        });

        // 마커 클러스터러 생성
        let clusterer = new kakao.maps.MarkerClusterer({
            map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
            averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
            minLevel: 10 // 클러스터 할 최소 지도 레벨 
        });

        // 임의의 좌표 데이터 (대여 차량 위치 예시)
        let positions = [
        { lat: 37.5512, lng: 126.9882 },  // 남산타워
        { lat: 37.5796, lng: 126.9770 },  // 경복궁
        { lat: 37.5665, lng: 126.9780 },  // 서울 시청
        { lat: 37.5700, lng: 126.9820 },  // 북촌 한옥마을
        { lat: 37.5514, lng: 127.0733 },  // 서울숲
        { lat: 37.541, lng: 127.012 },    // 올림픽 공원
        { lat: 37.4964, lng: 126.8822 },  // 하늘공원

        // 경기
        { lat: 37.7677, lng: 127.4983 },  // 가평 아침고요수목원
        { lat: 37.9724, lng: 127.2717 },  // 남이섬
        { lat: 37.8029, lng: 127.5217 },  // 가평 유명산 자연휴양림
        { lat: 37.4644, lng: 126.7054 },  // 소래습지생태공원 (시흥)
        { lat: 37.2979, lng: 127.4414 },  // 용인 자연휴양림
        { lat: 37.4253, lng: 127.5206 },  // 광주 곤지암 리조트
        { lat: 37.6784, lng: 127.1739 },  // 양평 대명비발디파크
        { lat: 37.6326, lng: 127.1952 },  // 양평 두물머리
        { lat: 37.3845, lng: 126.9355 },  // 과천 서울대공원 캠핑장
        { lat: 37.6057, lng: 127.0137 },  // 북한산 국립공원 (구파발)
        { lat: 37.7539, lng: 126.4778 },  // 강화도 동막해수욕장

        // 인천
        { lat: 37.4602, lng: 126.4407 },  // 영종도 을왕리 해수욕장
        { lat: 37.3497, lng: 126.7353 },  // 인천 대부도 방아머리해수욕장
        { lat: 37.2636, lng: 126.6077 },  // 인천 소래포구
        { lat: 37.4810, lng: 126.5294 },  // 인천 무의도
        ];

        // 좌표 데이터로부터 마커 생성
        let markers = positions.map(function(position) {
            return new kakao.maps.Marker({
                position: new kakao.maps.LatLng(position.lat, position.lng)
            });
        });

        // 클러스터러에 마커 추가
        clusterer.addMarkers(markers);
    </script>
    

    <script>
let ctx = document.getElementById('myChart').getContext('2d');
let myChart = new Chart(ctx, {
    type: 'line', // 차트 유형
    data: {
        datasets: [
            {
                label: '유니캠프 스타리아 RT 팝업루프 (캠퍼밴) 예약 수',
                data: [
                    {x: '2024-09-06T12:00:00', y: 5},
                    {x: '2024-09-06T12:45:00', y: 25},
                    {x: '2024-09-06T13:30:00', y: 50},
                    {x: '2024-09-06T14:30:00', y: 35},
                    {x: '2024-09-06T15:30:00', y: 41},
                    {x: '2024-09-06T16:30:00', y: 15},
                    {x: '2024-09-06T17:30:00', y: 10},
                    {x: '2024-09-06T18:00:00', y: 0}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 2,
                fill: true,
                tension: 0.1 // 곡선이 부드럽고 넓게 표현됨
            },
            {
                label: '로디 프리미엄 2인승 예약 수',
                data: [
                    {x: '2024-09-06T12:00:00', y: 3},
                    {x: '2024-09-06T12:30:00', y: 12},
                    {x: '2024-09-06T13:00:00', y: 20},
                    {x: '2024-09-06T14:00:00', y: 35},
                    {x: '2024-09-06T15:00:00', y: 5},
                    {x: '2024-09-06T16:00:00', y: 22},
                    {x: '2024-09-06T17:00:00', y: 35},
                    {x: '2024-09-06T18:00:00', y: 15}
                ],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 2,
                fill: true,
                tension: 0.1 // 중간 정도의 부드러움
            },
            {
                label: '유니캠프 스타리아 RT 팝업루프 (캠퍼밴) 반납 수',
                data: [
                    {x: '2024-09-06T12:00:00', y: 5},
                    {x: '2024-09-06T12:50:00', y: 15},
                    {x: '2024-09-06T13:40:00', y: 10},
                    {x: '2024-09-06T14:40:00', y: 22},
                    {x: '2024-09-06T15:40:00', y: 18},
                    {x: '2024-09-06T16:40:00', y: 50},
                    {x: '2024-09-06T17:24:00', y: 30},
                    {x: '2024-09-06T18:00:00', y: 20}
                ],
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 2,
                fill: true,
                tension: 0.4 // 곡선이 더 부드럽게 표현됨
            },
            {
                label: '로디 프리미엄 2인승 반납 수',
                data: [
                    {x: '2024-09-06T12:00:00', y: 1},
                    {x: '2024-09-06T13:00:00', y: 5},
                    {x: '2024-09-06T14:00:00', y: 15},
                    {x: '2024-09-06T15:00:00', y: 10},
                    {x: '2024-09-06T16:00:00', y: 20},
                    {x: '2024-09-06T17:00:00', y: 28},
                    {x: '2024-09-06T18:00:00', y: 45}
                ],
                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                borderColor: 'rgba(153, 102, 255, 1)',
                borderWidth: 2,
                fill: true,
                tension: 0.4 // 곡선이 매우 부드럽게 표현됨
            }
        ]
    },
    options: {
        scales: {
            x: {
                type: 'time', // X축을 시간 축으로 설정
                time: {
                    unit: 'minute', // 시간 단위를 분으로 설정
                    stepSize: 30, // 더 큰 간격을 위해 30분 단위로 설정
                    displayFormats: {
                        minute: 'HH:mm' // 시간 라벨의 형식 설정
                    }
                },
                min: '2024-09-06T12:00:00', // 시작 시간
                max: '2024-09-06T18:00:00', // 끝 시간
                title: {
                    display: true,
                    text: '시간'
                }
            },
            y: {
                beginAtZero: true,
                title: {
                    display: true,
                    text: '수량'
                }
            }
        },
        plugins: {
            title: {
                display: true,
                text: '차량별 실시간 예약 및 반납 타임 라인'
            },
            legend: {
                display: true,
                position: 'top'
            }
        }
    }
});

    </script>

</body>
</html>